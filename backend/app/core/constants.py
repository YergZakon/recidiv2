"""
–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ä–∞–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–π

–ö–†–ò–¢–ò–ß–ù–û: –í–°–ï –∑–Ω–∞—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ 146,570 –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏–π
–ù–ï –ò–ó–ú–ï–ù–Ø–¢–¨ –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –≥—Ä—É–ø–ø–æ–π

–ò—Å—Ç–æ—á–Ω–∏–∫–∏:
- utils/risk_calculator.py (—Å—Ç—Ä–æ–∫–∏ 18-35, 306-315, 236-245)
- utils/data_loader.py (—Å—Ç—Ä–æ–∫–∏ 94-107, 142-145)
- utils/forecasting.py (—Å—Ç—Ä–æ–∫–∏ 306-315, 364-412)
- main.py (—Å—Ç—Ä–æ–∫–∏ 135-151)

–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º: 2024-12-13
"""

from typing import Dict, Tuple, Final
from decimal import Decimal

# =============================================================================
# –û–°–ù–û–í–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–°–°–õ–ï–î–û–í–ê–ù–ò–Ø
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 94-98, main.py —Å—Ç—Ä–æ–∫–∏ 135-141
TOTAL_VIOLATIONS_ANALYZED: Final[int] = 146570
TOTAL_RECIDIVISTS: Final[int] = 12333
PREVENTABLE_CRIMES_PERCENT: Final[float] = 97.0  # –ù–ï –æ–∫—Ä—É–≥–ª—è—Ç—å –¥–æ 97!
UNSTABLE_PATTERN_PERCENT: Final[float] = 72.7   # –ù–ï –æ–∫—Ä—É–≥–ª—è—Ç—å –¥–æ 73!
ADMIN_TO_THEFT_TRANSITIONS: Final[int] = 6465

# –°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
AVG_DAYS_TO_MURDER: Final[int] = 143
AVG_TIME_TO_CRIME: Final[int] = 143

# =============================================================================
# –í–†–ï–ú–ï–ù–ù–´–ï –û–ö–ù–ê –î–û –ü–†–ï–°–¢–£–ü–õ–ï–ù–ò–ô (–î–ù–ò)
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/risk_calculator.py —Å—Ç—Ä–æ–∫–∏ 306-315, utils/forecasting.py
# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 100-107, main.py —Å—Ç—Ä–æ–∫–∏ 143-149
CRIME_TIME_WINDOWS: Final[Dict[str, int]] = {
    '–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ': 109,
    '–ö—Ä–∞–∂–∞': 146,
    '–£–±–∏–π—Å—Ç–≤–æ': 143,
    '–í—ã–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–æ': 144,
    '–ì—Ä–∞–±–µ–∂': 148,
    '–†–∞–∑–±–æ–π': 150,
    '–ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ': 157,
    '–•—É–ª–∏–≥–∞–Ω—Å—Ç–≤–æ': 155
}

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
BASE_WINDOWS: Final[Dict[str, int]] = CRIME_TIME_WINDOWS.copy()

# =============================================================================
# –ü–†–û–¶–ï–ù–¢–´ –ü–†–ï–î–û–¢–í–†–ê–¢–ò–ú–û–°–¢–ò –ü–û –¢–ò–ü–ê–ú –ü–†–ï–°–¢–£–ü–õ–ï–ù–ò–ô
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/risk_calculator.py —Å—Ç—Ä–æ–∫–∏ 236-245
# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 100-107
# –ò—Å—Ç–æ—á–Ω–∏–∫: pages/1_üó∫Ô∏è_–ö–∞—Ä—Ç–∞_–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö_–æ–∫–æ–Ω.py —Å—Ç—Ä–æ–∫–∏ 60-68, 122
PREVENTION_RATES: Final[Dict[str, float]] = {
    '–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ': 82.3,
    '–ö—Ä–∞–∂–∞': 87.3,
    '–£–±–∏–π—Å—Ç–≤–æ': 97.0,
    '–í—ã–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–æ': 100.0,  # –í–ù–ò–ú–ê–ù–ò–ï: –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ–∞–π–ª–∞—Ö 100.7, —Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è
    '–ì—Ä–∞–±–µ–∂': 60.2,
    '–†–∞–∑–±–æ–π': 20.2,
    '–ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ': 65.6,
    '–•—É–ª–∏–≥–∞–Ω—Å—Ç–≤–æ': 45.0
}

# –ë–∞–∑–æ–≤—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤)
BASE_CRIME_PROBABILITIES: Final[Dict[str, float]] = PREVENTION_RATES.copy()

# =============================================================================
# –í–ï–°–ê –§–ê–ö–¢–û–†–û–í –†–ò–°–ö–ê
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/risk_calculator.py —Å—Ç—Ä–æ–∫–∏ 18-25
# –ö–†–ò–¢–ò–ß–ù–û: –°—É–º–º–∞ –≤–µ—Å–æ–≤ –¥–æ–ª–∂–Ω–∞ —Ä–∞–≤–Ω—è—Ç—å—Å—è 1.0
RISK_WEIGHTS: Final[Dict[str, float]] = {
    'pattern_weight': 0.25,      # –ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è
    'history_weight': 0.20,      # –ò—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π  
    'time_weight': 0.15,         # –í—Ä–µ–º–µ–Ω–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä
    'age_weight': 0.10,          # –í–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä
    'social_weight': 0.15,       # –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
    'escalation_weight': 0.15    # –§–∞–∫—Ç–æ—Ä—ã —ç—Å–∫–∞–ª–∞—Ü–∏–∏
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã –≤–µ—Å–æ–≤
_WEIGHTS_SUM = sum(RISK_WEIGHTS.values())
assert abs(_WEIGHTS_SUM - 1.0) < 0.001, f"–°—É–º–º–∞ –≤–µ—Å–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1.0, –ø–æ–ª—É—á–∏–ª–∏ {_WEIGHTS_SUM}"

# =============================================================================
# –†–ò–°–ö–ò –ü–û –ü–ê–¢–¢–ï–†–ù–ê–ú –ü–û–í–ï–î–ï–ù–ò–Ø
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/risk_calculator.py —Å—Ç—Ä–æ–∫–∏ 28-35
# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 142-145 (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤)
PATTERN_RISKS: Final[Dict[str, float]] = {
    'mixed_unstable': 0.8,       # 72.7% –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
    'chronic_criminal': 0.9,     # 13.6% –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ - —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∏
    'escalating': 0.85,          # 7.0% –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ - –æ–ø–∞—Å–Ω–∞—è —Ç–µ–Ω–¥–µ–Ω—Ü–∏—è —ç—Å–∫–∞–ª–∞—Ü–∏–∏
    'deescalating': 0.4,         # 5.7% –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ - —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞
    'single': 0.3,               # 1.0% –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ - –µ–¥–∏–Ω–∏—á–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è
    'unknown': 0.5               # –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω (–Ω–µ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è)
}

# –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏
PATTERN_DISTRIBUTION: Final[Dict[str, float]] = {
    'mixed_unstable': 72.7,      # –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
    'chronic_criminal': 13.6,    # –•—Ä–æ–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Å—Ç—É–ø–Ω–∏–∫–∏  
    'escalating': 7.0,           # –≠—Å–∫–∞–ª–∞—Ü–∏—è
    'deescalating': 5.7,         # –î–µ—ç—Å–∫–∞–ª–∞—Ü–∏—è
    'single': 1.0                # –ï–¥–∏–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
_PATTERN_SUM = sum(PATTERN_DISTRIBUTION.values())
assert abs(_PATTERN_SUM - 100.0) < 0.1, f"–°—É–º–º–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 100%, –ø–æ–ª—É—á–∏–ª–∏ {_PATTERN_SUM}%"

# =============================================================================
# –ö–ê–¢–ï–ì–û–†–ò–ò –†–ò–°–ö–ê –ò –ü–û–†–û–ì–û–í–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/risk_calculator.py —Å—Ç—Ä–æ–∫–∏ 214-221
# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 147-158
RISK_CATEGORIES: Final[Dict[str, Dict[str, any]]] = {
    'critical': {
        'range': (7.0, 10.0),
        'label': 'üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π',
        'color': '#dc2626',
        'description': '–¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞'
    },
    'high': {
        'range': (5.0, 7.0),
        'label': 'üü° –í—ã—Å–æ–∫–∏–π', 
        'color': '#f59e0b',
        'description': '–£—Å–∏–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥'
    },
    'medium': {
        'range': (3.0, 5.0),
        'label': 'üü† –°—Ä–µ–¥–Ω–∏–π',
        'color': '#f97316', 
        'description': '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å'
    },
    'low': {
        'range': (0.0, 3.0),
        'label': 'üü¢ –ù–∏–∑–∫–∏–π',
        'color': '#059669',
        'description': '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å'
    }
}

# –ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
RISK_THRESHOLD_CRITICAL: Final[float] = 7.0
RISK_THRESHOLD_HIGH: Final[float] = 5.0
RISK_THRESHOLD_MEDIUM: Final[float] = 3.0

# =============================================================================
# –¶–í–ï–¢–û–í–ê–Ø –°–•–ï–ú–ê –î–õ–Ø –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/forecasting.py —Å—Ç—Ä–æ–∫–∏ 20-29
CRIME_COLORS: Final[Dict[str, str]] = {
    '–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ': '#e74c3c',
    '–ö—Ä–∞–∂–∞': '#f39c12', 
    '–£–±–∏–π—Å—Ç–≤–æ': '#8e44ad',
    '–ì—Ä–∞–±–µ–∂': '#3498db',
    '–†–∞–∑–±–æ–π': '#27ae60',
    '–•—É–ª–∏–≥–∞–Ω—Å—Ç–≤–æ': '#f1c40f',
    '–í—ã–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–æ': '#e67e22',
    '–ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ': '#c0392b'
}

# –¶–≤–µ—Ç–∞ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π —Ä–∏—Å–∫–∞
RISK_COLORS: Final[Dict[str, str]] = {
    'critical': '#e74c3c',    # –ö—Ä–∞—Å–Ω—ã–π
    'high': '#f39c12',        # –û—Ä–∞–Ω–∂–µ–≤—ã–π  
    'medium': '#fd7e14',      # –¢–µ–º–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π
    'low': '#27ae60'          # –ó–µ–ª–µ–Ω—ã–π
}

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–û–ì–ù–û–ó–ò–†–û–í–ê–ù–ò–Ø
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/forecasting.py, utils/risk_calculator.py
DEFAULT_FORECAST_HORIZON_DAYS: Final[int] = 365
MIN_FORECAST_DAYS: Final[int] = 30
MAX_FORECAST_DAYS: Final[int] = 365

# –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –≤–æ–∑—Ä–∞—Å—Ç–∞ (–∏—Å—Ç–æ—á–Ω–∏–∫: utils/risk_calculator.py —Å—Ç—Ä–æ–∫–∏ 143-160)
AGE_MODIFIERS: Final[Dict[str, Tuple[int, int, float]]] = {
    'young': (18, 25, 0.8),      # –ú–æ–ª–æ–¥—ã–µ - –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –±—ã—Å—Ç—Ä–µ–µ
    'adult': (26, 35, 0.9),      # –í–∑—Ä–æ—Å–ª—ã–µ
    'mature': (36, 45, 1.1),     # –ó—Ä–µ–ª—ã–µ
    'senior': (46, 100, 1.3)     # –°—Ç–∞—Ä—à–∏–µ - –º–µ–¥–ª–µ–Ω–Ω–µ–µ
}

# –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
CONFIDENCE_THRESHOLDS: Final[Dict[str, int]] = {
    'high': 3,      # 3+ —Ñ–∞–∫—Ç–æ—Ä–∞ = –≤—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
    'medium': 2,    # 2 —Ñ–∞–∫—Ç–æ—Ä–∞ = —Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å  
    'low': 1        # 1 —Ñ–∞–∫—Ç–æ—Ä = –Ω–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
}

# =============================================================================
# –î–ê–ù–ù–´–ï –≠–°–ö–ê–õ–ê–¶–ò–ò –ê–î–ú–ò–ù–ò–°–¢–ê–¢–ò–í–ù–û–ï ‚Üí –£–ì–û–õ–û–í–ù–û–ï
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 222-226
TOP_ESCALATION_TRANSITIONS: Final[Dict[str, int]] = {
    '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ ‚Üí –ö—Ä–∞–∂–∞': 6465,
    '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ ‚Üí –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ': 1968,
    '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ ‚Üí –ì—Ä–∞–±–µ–∂': 771,
    '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ ‚Üí –ü–æ–±–æ–∏': 587,
    '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ ‚Üí –ù–∞—Ä–∫–æ—Ç–∏–∫–∏': 645
}

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –§–ê–ô–õ–û–í –î–ê–ù–ù–´–•
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 16-22
REQUIRED_DATA_FILES: Final[Tuple[str, ...]] = (
    'RISK_ANALYSIS_RESULTS.xlsx',
    'ML_DATASET_COMPLETE.xlsx', 
    'crime_analysis_results.xlsx',
    'serious_crimes_analysis.xlsx',
    'risk_escalation_matrix.xlsx'
)

DATA_DIR: Final[str] = 'data'

# –ö–æ–ª–æ–Ω–∫–∏ –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
RISK_DATA_COLUMNS: Final[Tuple[str, ...]] = (
    '–ò–ò–ù',
    'risk_total_risk_score', 
    'pattern_type'
)

# =============================================================================
# –ü–†–û–ì–†–ê–ú–ú–´ –í–ú–ï–®–ê–¢–ï–õ–¨–°–¢–í–ê
# =============================================================================

# –ò—Å—Ç–æ—á–Ω–∏–∫: utils/forecasting.py —Å—Ç—Ä–æ–∫–∏ 364-412
INTERVENTION_PROGRAMS: Final[Dict[str, Dict[str, any]]] = {
    '–ö—Ä–∞–∂–∞': {
        'programs': ('–¢—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ', '–§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å'),
        'urgency': 'high',
        'duration': 90
    },
    '–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ': {
        'programs': ('–ü—Ä–∞–≤–æ–≤–æ–µ –ø—Ä–æ—Å–≤–µ—â–µ–Ω–∏–µ', '–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å', '–≠—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ'),
        'urgency': 'critical',
        'duration': 60
    },
    '–£–±–∏–π—Å—Ç–≤–æ': {
        'programs': ('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–Ω–µ–≤–æ–º', '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å', '–ö–æ–Ω—Ç—Ä–æ–ª—å –∞–ª–∫–æ–≥–æ–ª—è', '–ú–µ–¥–∏–∞—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤'),
        'urgency': 'critical', 
        'duration': 120
    },
    '–ì—Ä–∞–±–µ–∂': {
        'programs': ('–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è', '–¢—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ', '–†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è'),
        'urgency': 'high',
        'duration': 90
    },
    '–†–∞–∑–±–æ–π': {
        'programs': ('–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å', '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è', '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞'),
        'urgency': 'critical',
        'duration': 120
    },
    '–•—É–ª–∏–≥–∞–Ω—Å—Ç–≤–æ': {
        'programs': ('–î–æ—Å—É–≥–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã', '–°–ø–æ—Ä—Ç', '–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã'),
        'urgency': 'medium',
        'duration': 60
    },
    '–í—ã–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–æ': {
        'programs': ('–ü—Ä–∞–≤–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ', '–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞', '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å'),
        'urgency': 'high',
        'duration': 90
    },
    '–ò–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω–∏–µ': {
        'programs': ('–ü—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å', '–ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è', '–¢–µ—Ä–∞–ø–∏—è'),
        'urgency': 'critical',
        'duration': 180
    }
}

# =============================================================================
# –í–ê–õ–ò–î–ê–¶–ò–û–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò
# =============================================================================

def validate_iin_checksum(iin: str) -> bool:
    """
    –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã –ò–ò–ù –†–ö
    –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 160-179
    """
    if not iin or len(iin) != 12 or not iin.isdigit():
        return False
    
    # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –≤ production –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è
    return True


def get_risk_category_by_score(score: float) -> str:
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ä–∏—Å–∫–∞ –ø–æ –±–∞–ª–ª—É
    –ò—Å—Ç–æ—á–Ω–∏–∫: utils/data_loader.py —Å—Ç—Ä–æ–∫–∏ 147-158
    """
    if score >= RISK_THRESHOLD_CRITICAL:
        return RISK_CATEGORIES['critical']['label']
    elif score >= RISK_THRESHOLD_HIGH:
        return RISK_CATEGORIES['high']['label']
    elif score >= RISK_THRESHOLD_MEDIUM:
        return RISK_CATEGORIES['medium']['label'] 
    else:
        return RISK_CATEGORIES['low']['label']


def get_risk_level_key(score: float) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–±–µ–∑ —ç–º–æ–¥–∑–∏)
    """
    if score >= RISK_THRESHOLD_CRITICAL:
        return 'critical'
    elif score >= RISK_THRESHOLD_HIGH:
        return 'high'
    elif score >= RISK_THRESHOLD_MEDIUM:
        return 'medium' 
    else:
        return 'low'


def get_crime_color(crime_type: str) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–≤–µ—Ç –¥–ª—è —Ç–∏–ø–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è
    """
    return CRIME_COLORS.get(crime_type, '#95a5a6')

# =============================================================================
# –ú–ï–¢–ê–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ö–û–ù–°–¢–ê–ù–¢–ê–•
# =============================================================================

CONSTANTS_VERSION: Final[str] = '1.0.0'
LAST_RESEARCH_SYNC: Final[str] = '2024-12-13'
RESEARCH_DATA_SOURCE: Final[str] = '–ê–Ω–∞–ª–∏–∑ 146,570 –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏–π –ö–ü–°–∏–°–£ –†–ö'

# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
CRITICAL_CHECKSUM: Final[Dict[str, any]] = {
    'total_violations': TOTAL_VIOLATIONS_ANALYZED,
    'total_recidivists': TOTAL_RECIDIVISTS,
    'preventable_percent': PREVENTABLE_CRIMES_PERCENT,
    'unstable_pattern': UNSTABLE_PATTERN_PERCENT,
    'murder_days': CRIME_TIME_WINDOWS['–£–±–∏–π—Å—Ç–≤–æ'],
    'pattern_risks_sum': sum(PATTERN_RISKS.values()),
    'weights_sum': sum(RISK_WEIGHTS.values())
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è
def _validate_constants():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è"""
    errors = []
    
    if TOTAL_VIOLATIONS_ANALYZED != 146570:
        errors.append(f"TOTAL_VIOLATIONS_ANALYZED –∏–∑–º–µ–Ω–µ–Ω–æ: {TOTAL_VIOLATIONS_ANALYZED} != 146570")
    
    if TOTAL_RECIDIVISTS != 12333:
        errors.append(f"TOTAL_RECIDIVISTS –∏–∑–º–µ–Ω–µ–Ω–æ: {TOTAL_RECIDIVISTS} != 12333")
        
    if PREVENTABLE_CRIMES_PERCENT != 97.0:
        errors.append(f"PREVENTABLE_CRIMES_PERCENT –∏–∑–º–µ–Ω–µ–Ω–æ: {PREVENTABLE_CRIMES_PERCENT} != 97.0")
        
    if UNSTABLE_PATTERN_PERCENT != 72.7:
        errors.append(f"UNSTABLE_PATTERN_PERCENT –∏–∑–º–µ–Ω–µ–Ω–æ: {UNSTABLE_PATTERN_PERCENT} != 72.7")
        
    if CRIME_TIME_WINDOWS['–£–±–∏–π—Å—Ç–≤–æ'] != 143:
        errors.append(f"–£–±–∏–π—Å—Ç–≤–æ –≤—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–æ: {CRIME_TIME_WINDOWS['–£–±–∏–π—Å—Ç–≤–æ']} != 143")
    
    if abs(sum(RISK_WEIGHTS.values()) - 1.0) > 0.001:
        errors.append(f"–°—É–º–º–∞ –≤–µ—Å–æ–≤ != 1.0: {sum(RISK_WEIGHTS.values())}")
    
    if errors:
        raise ValueError("–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω—ã:\n" + "\n".join(errors))

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
_validate_constants()

# =============================================================================
# –≠–ö–°–ü–û–†–¢ –î–õ–Ø –ò–ú–ü–û–†–¢–ê
# =============================================================================

__all__ = [
    # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    'TOTAL_VIOLATIONS_ANALYZED',
    'TOTAL_RECIDIVISTS', 
    'PREVENTABLE_CRIMES_PERCENT',
    'UNSTABLE_PATTERN_PERCENT',
    'ADMIN_TO_THEFT_TRANSITIONS',
    'AVG_DAYS_TO_MURDER',
    
    # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞
    'CRIME_TIME_WINDOWS',
    'BASE_WINDOWS',
    
    # –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–º–æ—Å—Ç—å  
    'PREVENTION_RATES',
    'BASE_CRIME_PROBABILITIES',
    
    # –í–µ—Å–∞ –∏ —Ä–∏—Å–∫–∏
    'RISK_WEIGHTS',
    'PATTERN_RISKS',
    'PATTERN_DISTRIBUTION',
    
    # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∏—Å–∫–∞
    'RISK_CATEGORIES',
    'RISK_THRESHOLD_CRITICAL',
    'RISK_THRESHOLD_HIGH',
    'RISK_THRESHOLD_MEDIUM',
    
    # –¶–≤–µ—Ç–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
    'CRIME_COLORS',
    'RISK_COLORS',
    
    # –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
    'DEFAULT_FORECAST_HORIZON_DAYS',
    'AGE_MODIFIERS',
    'CONFIDENCE_THRESHOLDS',
    
    # –≠—Å–∫–∞–ª–∞—Ü–∏—è –∏ –¥–∞–Ω–Ω—ã–µ
    'TOP_ESCALATION_TRANSITIONS',
    'REQUIRED_DATA_FILES',
    'RISK_DATA_COLUMNS',
    
    # –ü—Ä–æ–≥—Ä–∞–º–º—ã –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
    'INTERVENTION_PROGRAMS',
    
    # –§—É–Ω–∫—Ü–∏–∏
    'validate_iin_checksum',
    'get_risk_category_by_score', 
    'get_risk_level_key',
    'get_crime_color',
    
    # –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    'CONSTANTS_VERSION',
    'CRITICAL_CHECKSUM'
]